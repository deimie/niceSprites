---
title: Playground
permalink: /playground
layout: default
---

{% assign hash = site.data.animations %}
{% assign sprite_file = site.baseurl | append: "/images/animations" %}

{% assign yPixels = 509 %}
{% assign xPixels = 365 %}

<div class="playground">
  <div id="boy" class="sprite"></div>
</div>

<style>
    .sprite {
        scale:50%;
        height: {{yPixels}}px;
        width: {{xPixels}}px;
        background-image: url('{{sprite_file}}/idle/Idle (1).png');
        background-repeat: no-repeat;
        margin-left: 0px;
    }

</style>

<script>
    

    let sprite = document.getElementById("boy");
    let keyHeld = false; // if key is pressed multiple times without being lifted (ex. holding down a key), ignore all new inputs
    let isJump = false; // while character isJump == true, lock all other inputs until false again 
    let isRight = true;
    let posX = 0;

    window.addEventListener("keydown", (event) => {
    if (event.key === "d" && keyHeld === false && isJump === false) {
      event.preventDefault();
      sprite.style.transform = "scaleX(1)"; // flip sprite to right-facing
      isRight = true;
      keyHeld = true;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);

      walkAnimation();
    }
      
    else if (event.key === "a" && keyHeld === false && isJump === false) {
      event.preventDefault();
      sprite.style.transform = "scaleX(-1)"; // flip sprite to left-facing
      isRight = false;
      keyHeld = true;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);

      walkAnimation();
    }

    else if (event.key === "w" && isJump === false) {
      event.preventDefault();
      isJump = true;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);

      jumpAnimation();
    }
  });

  window.addEventListener("keyup", (event) => {
    if(isJump === false) {
      keyHeld = false;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);
      idleAnimation();
    }
    
  });

    var idling;
    function idleAnimation() {
        let i = 1;
        idling = setInterval(function() {
          i++;
          sprite.style.backgroundImage = "url('{{sprite_file}}/idle/Idle (" + i + ").png')";

          if(i >= 15) {
              i = 1;
          }
    }, 80);
    }
    
    var walking;
    function walkAnimation() {
        let i = 1;
        walking = setInterval(function() {
          i++;
          sprite.style.backgroundImage = "url('{{sprite_file}}/walk/Walk (" + i + ").png')";

          if(isRight === true) {
            posX+=7;
            sprite.style.marginLeft = posX + "px";
          } 
          else {
            posX-=7;
            sprite.style.marginLeft = posX + "px";
          }

          if(i >= 15) {
              i = 1;
          }
    }, 80);
    }

    function jumpAnimation() {
      let i = 1;
        jumping = setInterval(function(){
        i++;
        sprite.style.backgroundImage = "url('{{sprite_file}}/jump/Jump (" + i + ").png')";

        if(i >= 15) {
              i = 1;
              clearInterval(jumping);
              isJump = false;
              keyHeld = false;
              idleAnimation();
          }
      }, 80);
    }
    
</script>