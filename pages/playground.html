---
title: Playground
permalink: /playground
layout: default
---

{% assign sprite_file = site.baseurl | append: "/images/animations" %}

<div class="background"></div>
<style>
  .background {
    background-image: url('images/backgrounds/yuppers.jpeg');
    position:absolute;
    width: 6000px;
    height:300px;
    z-index:-1;
    left:0px;
    background-size:contain;
  }
  html, body {
    max-width: 100%;
    overflow-x: hidden;
}
</style>

<div id="boy" class="sprite"></div>

<link rel="stylesheet" href="{{ site.baseurl }}/assets/sprite.css">

<script>
    

    let sprite = document.getElementById("boy");
    let keyHeld = false; // if key is pressed multiple times without being lifted (ex. holding down a key), ignore all new inputs
    let isJump = false; // while character isJump == true, lock all other inputs until false again 
    let isRight = true;
    let posX = 10;

    window.addEventListener("keydown", (event) => {
    if (event.key === "d" && keyHeld === false && isJump === false) {
      event.preventDefault();
      sprite.style.transform = "scaleX(1)"; // flip sprite to right-facing
      isRight = true;
      keyHeld = true;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);

      walkAnimation();
    }
      
    else if (event.key === "a" && keyHeld === false && isJump === false) {
      event.preventDefault();
      sprite.style.transform = "scaleX(-1)"; // flip sprite to left-facing
      isRight = false;
      keyHeld = true;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);

      walkAnimation();
    }

    else if (event.key === "w" && isJump === false) {
      event.preventDefault();
      isJump = true;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);

      jumpAnimation();
    }
  });

  window.addEventListener("keyup", (event) => {
    if(isJump === false) {
      keyHeld = false;

      // stop all other animation loops
      clearInterval(walking);
      clearInterval(idling);
      idleAnimation();
    }
    
  });

    var idling;
    function idleAnimation() {
        let i = 1;
        idling = setInterval(function() {
          i++;
          sprite.style.backgroundImage = "url('{{sprite_file}}/idle/Idle (" + i + ").png')";

          if(i >= 15) {
              i = 1;
          }
    }, 80);
    }
    
    var walking;
    function walkAnimation() {
        let i = 1;
        walking = setInterval(function() {
          i++;
          sprite.style.backgroundImage = "url('{{sprite_file}}/walk/Walk (" + i + ").png')";

          if(isRight === true) {
            posX+=7;
            sprite.style.left = posX + "px";
          } 
          else {
            posX-=7;
            sprite.style.left = posX + "px";
          }

          if(i >= 15) {
              i = 1;
          }
    }, 80);
    }

    function jumpAnimation() {
      let i = 1;
        jumping = setInterval(function(){
        i++;
        sprite.style.backgroundImage = "url('{{sprite_file}}/jump/Jump (" + i + ").png')";

        if(i >= 15) {
              i = 1;
              clearInterval(jumping);
              isJump = false;
              keyHeld = false;
              idleAnimation();
          }
      }, 80);
    }
    
</script>